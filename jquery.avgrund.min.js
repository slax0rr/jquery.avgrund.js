/*! jquery.avgrund - v1.3.2 (http://labs.voronianski.com/jquery.avgrund.js) */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function($){$.fn.avgrund=function(a){var b={width:380,height:280,showClose:!1,showCloseText:"",closeByEscape:!0,closeByDocument:!0,holderClass:"",overlayClass:"",enableStackAnimation:!1,onBlurContainer:"",openOnEvent:!0,setEvent:"click",onLoad:!1,onUnload:!1,template:"<p>This is test popin content!</p>",afterComplete:!1};return a=$.extend(b,a),this.each(function(){function b(b){a.closeByEscape&&27===b.keyCode&&g()}function c(b){a.closeByDocument?$(b.target).is(".avgrund-overlay, .avgrund-close")&&(b.preventDefault(),g()):$(b.target).is(".avgrund-close")&&(b.preventDefault(),g())}function d(){var a=$(window).height();i.height(a),$(".avgrund-overlay").height(a)}function e(){"function"==typeof a.onLoad&&a.onLoad(h),d(),setTimeout(function(){i.addClass("avgrund-active")},100);var e=$('<div class="avgrund-popin '+a.holderClass+'"></div>');e.append(l),i.append(e),$(".avgrund-popin").css({width:j+"px",height:k+"px"}),a.showClose&&$(".avgrund-popin").append('<a href="#" class="avgrund-close">'+a.showCloseText+"</a>"),a.enableStackAnimation&&$(".avgrund-popin").addClass("stack"),f(),i.bind("keyup",b).bind("click",c),$(window).resize(function(){d(),f()}),"function"==typeof a.afterComplete&&a.afterComplete(h)}function f(){var a=$(".avgrund-popin"),b=a.height(),c=a.width();console.log(b,c),a.css("position","absolute").css("top",$(window).height()/2-b/2).css("left",$(window).width()/2-c/2)}function g(){i.unbind("keyup",b).unbind("click",c).height("auto").removeClass("avgrund-active"),$(window).off("resize"),setTimeout(function(){$(".avgrund-popin").remove()},500),"function"==typeof a.onUnload&&a.onUnload(h)}var h=$(this),i=$("body"),j=a.width>640?640:a.width,k=a.height>350?350:a.height,l="function"==typeof a.template?a.template(h):a.template;i.addClass("avgrund-ready"),0===$(".avgrund-overlay").length&&i.append('<div class="avgrund-overlay '+a.overlayClass+'"></div>'),""!==a.onBlurContainer&&$(a.onBlurContainer).addClass("avgrund-blur"),a.openOnEvent?h.bind(a.setEvent,function(a){a.stopPropagation(),$(a.target).is("a")&&a.preventDefault(),e()}):e()})}});